!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(e=e||self).Lang=s()}(this,function(){"use strict";var o=function(){return(o=Object.assign||function(e){for(var s,t=1,a=arguments.length;t<a;t++)for(var c in s=arguments[t])Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c]);return e}).apply(this,arguments)};function i(e){return"-Inf"===e?-1/0:"+Inf"===e||"Inf"===e||"*"===e?1/0:parseInt(e,10)}var l=/^({\s*(\-?\d+(\.\d+)?[\s*,\s*\-?\d+(\.\d+)?]*)\s*})|([\[\]])\s*(-Inf|\*|\-?\d+(\.\d+)?)\s*,\s*(\+?Inf|\*|\-?\d+(\.\d+)?)\s*([\[\]])$/;function f(e,s){var t=(s=s.trim()).match(l);if(!t)throw new Error("Invalid interval: "+s);if(!t[2]){var a=(t=t.filter(function(e){return!!e}))[1],c=i(t[2]);c===1/0&&(c=-1/0);var r=i(t[3]),n=t[4];return("["===a?c<=e:c<e)&&("]"===n?e<=r:e<r)}for(var o=t[2].split(","),u=0;u<o.length;u++)if(parseInt(o[u],10)===e)return!0;return!1}var p=/({\s*(\-?\d+(\.\d+)?[\s*,\s*\-?\d+(\.\d+)?]*)\s*})|([\[\]])\s*(-Inf|\*|\-?\d+(\.\d+)?)\s*,\s*(\+?Inf|\*|\-?\d+(\.\d+)?)\s*([\[\]])/;return function(){function e(e){if(this.locale=null,this.fallback=null,this.messages={},!e)throw new Error("options must be defined");this.locale=e.locale||function(){if(document&&document.documentElement)return document.documentElement.lang}()||"en",this.fallback=e.fallback,this.setMessages(e.messages)}return e.prototype.setMessages=function(e){e&&(this.messages=function c(r,n){return Object.keys(r).reduce(function(e,s){var t=r[s],a=n?n+"."+s:s;return"string"==typeof t?(e[a]=r[s],e):o({},e,c(t,a))},{})}(e))},e.prototype.getLocale=function(){return this.locale},e.prototype.setLocale=function(e){this.locale=e},e.prototype.getFallback=function(){return this.fallback},e.prototype.setFallback=function(e){this.fallback=e},e.prototype.get=function(e,s,t){if(!e)return null;e=e.replace(/\//g,".");var a,c,r=this._parseKey(e,t),n=r.source,o=r.sourceFallback,u=this.messages[n];return void 0===u&&void 0===(u=this.messages[o])?e:s?(a=u,c=s,Object.keys(c).sort(function(e,s){return s.length-e.length}).forEach(function(t){a=a.replace(new RegExp(":"+t,"gi"),function(e){var s=c[t];return e===e.toUpperCase()?s.toUpperCase():e===e.replace(/\w/i,function(e){return e.toUpperCase()})?s.charAt(0).toUpperCase()+s.slice(1):s})}),a):u},e.prototype.trans=function(e,s,t){return this.get(e,s,t)},e.prototype.has=function(e,s){var t=this.get(e,null,s);return null!==t&&t!==e},e.prototype.choice=function(e,s,t,a){void 0===t&&(t={}),t.count=s;var c=this.get(e,t,a);if(null===c)return c;for(var r=c.split("|"),n=[],o=0;o<r.length;o++)if(r[o]=r[o].trim(),p.test(r[o])){var u=r[o].split(/\s/);n.push(u.shift()),r[o]=u.join(" ")}if(1===r.length)return c;for(var i=0;i<n.length;i++)if(f(s,n[i]))return r[i];return r[function(e,s){switch(s){case"az":case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1==e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"hy":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1===e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2;case"cs":case"sk":return 1==e?0:2<=e&&e<=4?1:2;case"ga":return 1==e?0:2==e?1:2;case"lt":return e%10==1&&e%100!=11?0:2<=e%10&&(e%100<10||20<=e%100)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1==e?0:0===e||1<e%100&&e%100<11?1:10<e%100&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1==e?0:2<=e%10&&e%10<=4&&(e%100<12||14<e%100)?1:2;case"cy":return 1==e?0:2==e?1:8==e||11==e?2:3;case"ro":return 1==e?0:0===e||0<e%100&&e%100<20?1:2;case"ar":return 0===e?0:1==e?1:2==e?2:3<=e%100&&e%100<=10?3:11<=e%100&&e%100<=99?4:5;default:return 0}}(s,a=a||this._getLocaleFromExistingMessage(e,a))]},e.prototype.transChoice=function(e,s,t,a){return this.choice(e,s,t,a)},e.prototype._getLocaleFromExistingMessage=function(e,s){var t=this._parseKey(e,s);return this.messages[t.source]?this.locale:this.messages[t.sourceFallback]?this.fallback:null},e.prototype._parseKey=function(e,s){return e=e.replace(/\//g,"."),{source:(s||this.locale)+"."+e,sourceFallback:this.fallback+"."+e}},e}()});
